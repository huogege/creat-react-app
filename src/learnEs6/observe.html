<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script text="">
        /**
        *递归一个对象使得每一个key可检测
         * */
        class Observe{
            constructor(value) {
                this.value = value
                if(Array.isArray(value)) {
                    //
                }else {
                    this.walk(value)
                }
            }
            walk(obj) {
                const keys = Object.keys(obj)
                for(let i=0;i<keys.length;i++){
                    defineReactive(obj, keys[i])
                }
            }
        }
        function defineReactive(obj,key){
            if(typeof obj[key] == 'object') {
                new Observe(obj[key])
                console.log(obj[key])
            }
            obj[key] = 'changed'
        }
        let o1 = new Observe({
            a:1,
            b:2,
            c:{ca:1,cb:2},
            d:[1,2,3]
        })
        
        console.log(o1)
    </script>
</body>
</html>